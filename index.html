<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>RTLS Operations Knowledge Base</title>

  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 20px;
    }

    input {
      padding: 6px;
      font-size: 14px;
    }

    button {
      padding: 6px 10px;
      font-size: 14px;
      margin-left: 6px;
    }

    mark {
      background-color: yellow;
      color: black;
      font-weight: bold;
    }

    pre {
      white-space: pre-wrap;
      line-height: 1.4;
    }
  </style>
</head>

<body>

<h2>RTLS Operations Knowledge Base</h2>

<input
  id="q"
  style="width:600px"
  placeholder="Type your question here"
  onkeydown="if (event.key === 'Enter') search();"
/>

<button onclick="search()">Search</button>

<hr>

<div id="out"></div>

<script>
function escapeRegex(text) {
  return text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

function highlight(text, term) {
  if (!term) return text;

  const safeTerm = escapeRegex(term);
  const regex = new RegExp(`(${safeTerm})`, "gi");

  return text.replace(regex, "<mark>$1</mark>");
}

function search() {
  const term = document.getElementById("q").value.trim();
  const out = document.getElementById("out");

  if (!term) {
    out.innerHTML = "";
    return;
  }

  // === SAMPLE KB CONTENT ===
  // Replace this block later with fetch() or backend data
  const kbText = `
MobileView upgrade procedure
ALE Node1 reboot steps
ALE Node2 verification checklist
Cisco MSE integration overview
Certificate renewal process
High availability failover test
Gateway communication troubleshooting
Tag not reporting investigation
`;

  const highlighted = highlight(kbText, term);

  out.innerHTML = "<pre>" + highlighted + "</pre>";
}
</script>

</body>
</html>
